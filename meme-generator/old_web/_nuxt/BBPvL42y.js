import{p as ee,am as le,al as D,h as te,aa as ae,Q as ne,ao as ue,R as f,aQ as U,B as p,X as oe,q as ie,aq as re,ar as M,b as a,U as w,F,ai as se,a2 as de,av as ce,z as me,A as fe,o as pe,y as ve,w as R,a as Ve,E as b,aR as ye,x as Ce,d as be,ax as ge}from"./DIu47odP.js";import{u as he}from"./4_Vd_w68.js";import{V as ke}from"./sVARX7W8.js";import{b as Ie,f as we,c as Fe,d as Re,a as $,V as Se}from"./DjSnMVrT.js";import{V as Be}from"./C4wlqBm0.js";const Ae=ee({chips:Boolean,counter:Boolean,counterSizeString:{type:String,default:"$vuetify.fileInput.counterSize"},counterString:{type:String,default:"$vuetify.fileInput.counter"},hideInput:Boolean,multiple:Boolean,showSize:{type:[Boolean,Number,String],default:!1,validator:e=>typeof e=="boolean"||[1e3,1024].includes(Number(e))},...le({prependIcon:"$file"}),modelValue:{type:[Array,Object],default:e=>e.multiple?[]:null,validator:e=>D(e).every(r=>r!=null&&typeof r=="object")},...Ie({clearable:!0})},"VFileInput"),Pe=te()({name:"VFileInput",inheritAttrs:!1,props:Ae(),emits:{"click:control":e=>!0,"mousedown:control":e=>!0,"update:focused":e=>!0,"update:modelValue":e=>!0},setup(e,r){let{attrs:c,emit:v,slots:n}=r;const{t:g}=ae(),u=ne(e,"modelValue",e.modelValue,l=>D(l),l=>!e.multiple&&Array.isArray(l)?l[0]:l),{isFocused:m,focus:o,blur:i}=ue(e),S=f(()=>typeof e.showSize!="boolean"?e.showSize:void 0),B=f(()=>(u.value??[]).reduce((l,t)=>{let{size:V=0}=t;return l+V},0)),A=f(()=>U(B.value,S.value)),k=f(()=>(u.value??[]).map(l=>{const{name:t="",size:V=0}=l;return e.showSize?`${t} (${U(V,S.value)})`:t})),j=f(()=>{var t;const l=((t=u.value)==null?void 0:t.length)??0;return e.showSize?g(e.counterSizeString,l,A.value):g(e.counterString,l)}),P=p(),z=p(),s=p(),E=f(()=>m.value||e.active),x=f(()=>["plain","underlined"].includes(e.variant));function I(){var l;s.value!==document.activeElement&&((l=s.value)==null||l.focus()),m.value||o()}function _(l){var t;(t=s.value)==null||t.click()}function O(l){v("mousedown:control",l)}function Q(l){var t;(t=s.value)==null||t.click(),v("click:control",l)}function H(l){l.stopPropagation(),I(),de(()=>{u.value=[],ce(e["onClick:clear"],l)})}return oe(u,l=>{(!Array.isArray(l)||!l.length)&&s.value&&(s.value.value="")}),ie(()=>{const l=!!(n.counter||e.counter),t=!!(l||n.details),[V,L]=re(c),{modelValue:ze,...X}=M.filterProps(e),G=we(e);return a(M,w({ref:P,modelValue:u.value,"onUpdate:modelValue":y=>u.value=y,class:["v-file-input",{"v-file-input--chips":!!e.chips,"v-file-input--hide":e.hideInput,"v-input--plain-underlined":x.value},e.class],style:e.style,"onClick:prepend":_},V,X,{centerAffix:!x.value,focused:m.value}),{...n,default:y=>{let{id:h,isDisabled:C,isDirty:N,isReadonly:T,isValid:J}=y;return a(Fe,w({ref:z,"prepend-icon":e.prependIcon,onMousedown:O,onClick:Q,"onClick:clear":H,"onClick:prependInner":e["onClick:prependInner"],"onClick:appendInner":e["onClick:appendInner"]},G,{id:h.value,active:E.value||N.value,dirty:N.value||e.dirty,disabled:C.value,focused:m.value,error:J.value===!1}),{...n,default:K=>{var q;let{props:{class:W,...Y}}=K;return a(F,null,[a("input",w({ref:s,type:"file",readonly:T.value,disabled:C.value,multiple:e.multiple,name:e.name,onClick:d=>{d.stopPropagation(),T.value&&d.preventDefault(),I()},onChange:d=>{if(!d.target)return;const Z=d.target;u.value=[...Z.files??[]]},onFocus:I,onBlur:i},Y,L),null),a("div",{class:W},[!!((q=u.value)!=null&&q.length)&&!e.hideInput&&(n.selection?n.selection({fileNames:k.value,totalBytes:B.value,totalBytesReadable:A.value}):e.chips?k.value.map(d=>a(Be,{key:d,size:"small",text:d},null)):k.value.join(", "))])])}})},details:t?y=>{var h,C;return a(F,null,[(h=n.details)==null?void 0:h.call(n,y),l&&a(F,null,[a("span",null,null),a(Re,{active:!!((C=u.value)!=null&&C.length),value:j.value,disabled:e.disabled},n.counter)])])}:void 0})}),se({},P,z,s)}}),Me=me({__name:"new",setup(e){const r=p({}),c=p(null),v=p(),{createTemplate:n}=he(),g=fe(),u=async()=>{if(!v.value.validate()||!c.value)return;const m=await n(r.value,c.value);g.push(`/template/${m.id}`)};return(m,o)=>(pe(),ve(ke,null,{default:R(()=>[o[4]||(o[4]=Ve("h1",{class:"text-h4 mb-4"},"Create New Template",-1)),a(Se,{ref_key:"formRef",ref:v,onSubmit:ge(u,["prevent"])},{default:R(()=>[a($,{modelValue:b(r).name,"onUpdate:modelValue":o[0]||(o[0]=i=>b(r).name=i),label:"Template Name",rules:[i=>!!i||"Name is required"],"prepend-icon":"mdi-rename",required:""},null,8,["modelValue","rules"]),a($,{modelValue:b(r).comment,"onUpdate:modelValue":o[1]||(o[1]=i=>b(r).comment=i),label:"Comment","prepend-icon":"mdi-text",required:""},null,8,["modelValue"]),a(Pe,{modelValue:b(c),"onUpdate:modelValue":o[2]||(o[2]=i=>ye(c)?c.value=i:null),label:"Upload Image",accept:"image/*",rules:[i=>!!i||"Image is required"],required:""},null,8,["modelValue","rules"]),a(Ce,{type:"submit",color:"primary"},{default:R(()=>o[3]||(o[3]=[be("Create")])),_:1})]),_:1},512)]),_:1}))}});export{Me as default};
